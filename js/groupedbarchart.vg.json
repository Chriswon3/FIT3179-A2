{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "A grouped bar chart comparing life expectancy and GDP per continent.",
    "data": {
      "url": "https://raw.githubusercontent.com/Chriswon3/FIT3179-A2/main/data/worlddatabycontinent.csv"
    },
    "transform": [
        {
            "aggregate": [
                {"op": "mean", "field": "Life expectancy", "as": "average_life_expectancy"}
            ],
            "groupby":["Continent"]
        },
        {
            "aggregate": [
                {"op": "mean", "field": "GDP per Capita", "as": "average_GDP"}
            ],
            "groupby":["Continent"]
        }
    ],
    "mark": "bar",
    "encoding": {
      "x": {
        "field": "Continent", 
        "type": "nominal", 
        "axis": {"title": "Continent"}
      },
      "y": {
        "field": "average_GDP",
        "type": "quantitative",
        "axis": {"title": "Value"}
      },
      "color": {
        "field": "average_life_expectancy",
        "type": "nominal",
        "legend": {"title": "Life Expectancy"},
        "scale": {"domain": ["GDP", "Life Expectancy"], "range": ["#1f77b4", "#ff7f0e"]}
      },
      "column": {
        "field": "metric",
        "type": "nominal"
      }
    }
  }